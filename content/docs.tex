\section{Documentation}


\begin{frame}[fragile]{What You Will Learn:}
  \begin{itemize}
    \item Documenting your code using \emph{Sphinx}
    \item \emph{reStructuredText} (\reST/\texttt{RST}) syntax
    \item Using \emph{Read the Docs}
  \end{itemize}
\end{frame}


\begin{frame}[fragile]{Why Should We Document Our Code?}
  Well-documented code improves\dots
  \begin{itemize}
    \item Maintainability: Future developers, debugging, \dots
    \item Accessibility: Make your package easier to understand for new users
    \item Collaboration: Docs as a shared knowledge source
  \end{itemize}
\end{frame}


\begin{frame}[fragile]{
  What is Sphinx?
  \hfill
  \doc{https://www.sphinx-doc.org}{Sphinx}}
  \begin{itemize}
    \item Open-source, extensible documentation generator written in Python
    \item Multiple output formats: \texttt{HTML}, \LaTeX{} (for \texttt{PDF}), \texttt{ePub}, and more\dots
    \item Creates cross-references within your project and across different projects
    \item Allows documentation using a mark-up language (\reST)
    \item Supports various docstring formats (some through extensions)
  \end{itemize}
\end{frame}


\begin{frame}[fragile]{Installation}
  Sphinx can be installed via standard package managers:
  \begin{itemize}
    \item Installing from PyPI using \texttt{pip}:
    \begin{minted}{shell-session}
      $ pip install -U sphinx
    \end{minted}
    \item Conda/Mamba:
    \begin{minted}{shell-session}
      $ mamba install sphinx
    \end{minted}
    \begin{minted}{shell-session}
      $ conda install -c conda-forge sphinx
    \end{minted}

    \item Debian/Ubuntu using \texttt{apt}:
    \begin{minted}{shell-session}
      $ sudo apt install python3-sphinx
    \end{minted}

    \item Homebrew:
      \begin{minted}{shell-session}
        $ brew install sphinx-doc
      \end{minted}
  \end{itemize}
\end{frame}

\begin{frame}[fragile]{Getting Started}
  \begin{minted}[escapeinside=||]{shell-session}
    $ sphinx-quickstart docs
    |\textcolor{cmauve}{> Separate source and build directories (y/n) [n]:}| y
    |\textcolor{cmauve}{> Project name:}| ...
    |\textcolor{cmauve}{> Author name(s):}| ...
    |\textcolor{cmauve}{> Project release []:}| ...
    |\textcolor{cmauve}{> Project language [en]:}| ...
  \end{minted}

  \forestset{
    textfile/.style = {
      execute at begin node=\textcolor{vertexDarkRed}{\faFile*}\space
    },
    batchfile/.style = {
      execute at begin node=\textcolor{vertexDarkRed}{\faTerminal}\space
    },
    makefile/.style = {
      execute at begin node=\textcolor{vertexDarkRed}{\faFile}\space
    },
    pythonfile/.style = {
      execute at begin node=\textcolor{vertexDarkRed}{\faPython}\space
    },
    opened/.style = {execute at begin node=\textcolor{dircolor}{\faFolderOpen}\space},
    closed/.style = {execute at begin node=\textcolor{dircolor}{\faFolder}\space},
    dir tree/.style = {
      grow'=0,
      font=\ttfamily,
      folder,
      fit=band,
      s sep=5pt,
      before computing xy={l=20pt},
      edge={rounded corners=2pt},
    }
  }

  \begin{center}
  \pause
  \begin{minipage}{.45\textwidth}
  \adjustbox{max height=5.5cm}{%
    \begin{forest}
      for tree={dir tree}
      [docs, opened
        [build, closed]
        [source, opened
          [\_static, closed]
          [\_templates, closed]
          [conf.py, pythonfile]
          [index.rst, textfile]
        ]
        [make.bat, batchfile]
        [Makefile, makefile]
      ]
    \end{forest}
  }
  \end{minipage}
  \hfill
  \pause
  \begin{minipage}{.45\textwidth}
    \adjustbox{max height=5.5cm}{%
      \begin{forest}
        for tree={dir tree}
        [docs, opened
          [\_build, closed]
          [\_static, closed]
          [\_templates, closed]
          [conf.py, pythonfile]
          [index.rst, textfile]
          [make.bat, batchfile]
          [Makefile, makefile]
        ]
      \end{forest}
    }
  \end{minipage}
  \end{center}
\end{frame}
{
\setbeamercolor{description item}{fg=vertexDarkGrey}
\begin{frame}[fragile]{Breakdown of the Generated Structure}
  \begin{description}[labelwidth=\widthof{\faFolderOpen \texttt{\_templates}}]
    \setlength{\itemindent}{-4em}
    \item [\textcolor{dircolor}{\faFolderOpen} \texttt{build}:] Output directory for the docs.
    \item [\textcolor{dircolor}{\faFolderOpen} \texttt{\_static}:] Directory for static elements such as images, icons, or logos.
    \item [\textcolor{dircolor}{\faFolderOpen} \texttt{\_templates}:] Used to store \href{https://jinja.palletsprojects.com/en/stable/}{\texttt{Jinja}}
      templates for HTML page generation. %Also used by some Sphinx extensions.
    \item [\textcolor{vertexDarkRed}{\faFile*} \texttt{index.rst}:] Root document; contains the root of the table of contents tree.
      % Effectively your landing page in the HTML version.
    \item [\textcolor{vertexDarkRed}{\faPython} \texttt{conf.py}:] Main configuration file written in Python.
  \end{description}
\end{frame}
}

\begin{frame}[fragile]{Let's Build Our Docs}
  We will use the \texttt{Makefile} generated by \mintinline{shell-session}+sphinx-quickstart+ to build any format:
  \begin{minted}{shell-session}
    $ make <format>
  \end{minted}
  So, for the HTML version:
  \begin{minted}{shell-session}
    $ make html
  \end{minted}
  This will generate the HTML files for our docs inside the \texttt{build} directory.
  We can view the docs locally by running a Python HTTP server:
  \begin{minted}{shell-session}
    $ python -m http.server -d build [port]
  \end{minted}

  \begin{block}{Note}
    \mintinline{shell-session}+[port]+ is optional, see \mintinline{shell-session}+python -m http.server --help+.
  \end{block}
\end{frame}


\begin{frame}[fragile]{Preview}
\end{frame}


\begin{frame}[fragile]{Some reStructuredText (\texttt{reST}) Syntax}
  \begin{columns}[t, onlytextwidth]
    \begin{column}{0.33\textwidth}
      \begin{block}{Headings}
        \begin{minted}{rst}
          ====
          Part
          ====

          *******
          Chapter
          *******

          Section
          =======

          Subsection
          ----------

          Subsubsection
          ^^^^^^^^^^^^^

          Paragraph
          """""""""
        \end{minted}
      \end{block}
    \end{column}
    \hfill
    \begin{column}{0.66\textwidth}
      \begin{itemize}
        \item The structure is technically determined by order of occurance
        \begin{itemize}
          \item \textbf{But}: For better readability stick to the same order, \eg{} the one shown here
        \end{itemize}
        \item While overlines are optional, they are encouraged for parts and chapters
        \item Parts are also commonly set using \texttt{\#}
        \item Any of the following symbols are valid for over- and underlines:\\
          \textcolor{vertexDarkRed}{\texttt{=} \texttt{*} \texttt{-} \texttt{\textasciicircum} \texttt{"} \texttt{+} \texttt{\_} \texttt{\#} \texttt{\textasciitilde}}
          \mintinline{shell-session}{` . , : ; ' ! ? & $ %}
          \mintinline{shell-session}+( ) [ ] { }+\\
          \mintinline{shell-session}+< > @ \ / |+
      \end{itemize}
    \end{column}
  \end{columns}

\end{frame}


\begin{frame}[fragile]{Docstrings}
  Most of the documentation work will require you to write docstrings. The three most common
  formats are:
  \begin{columns}[t, onlytextwidth]
    \begin{column}{0.78\textwidth}
      \begin{itemize}
        \item<1-2> \reST:
          \begin{minted}{python}
            """[Summary of your method]

            :param [Parameter name]: [Parameter description]
            :type [Parameter name]: [Parameter type](, optional)
            :returns: [Return description]
            :rtype: [Return type]
            :raises [Exception class]: [Exception description]
            """
          \end{minted}

        \item<2> Example:
          \begin{minted}{python}
            """This is a reST-style docstring.

            :param param1: First parameter.
            :type param1: float
            :param param2: Second parameter, defaults to None.
            :type param2: str, optional
            :returns: Returns some value.
            :rtype: int
            :raises ValueError: Raises an exception.
            """
          \end{minted}
      \end{itemize}
    \end{column}
    \hfill
    \begin{column}{0.2\textwidth}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}[fragile]{Docstrings}
  Most of the documentation work will require you to write docstrings. The three most common
  formats are:
  \begin{columns}[t, onlytextwidth]
    \begin{column}{0.78\textwidth}
      \begin{itemize}
        \item Google:
          \begin{minted}{python}
            """[Summary of your method]

            Args:
                [Parameter name] ([Parameter type](, optional)): [Parameter description]

            Returns:
                [Return type]: [Return description]

            Raises:
                [Exception class]: [Exception description]
            """
          \end{minted}

        \item Example:
          \begin{minted}{python}
            """This is a Google-style docstring.

            Args:
                param1 (float): First parameter.
                param2 (:obj:`str`, optional): Second parameter. Defaults to None.

            Returns:
                int: Returns some value.

            Raises:
                ValueError: Raises an exception.
            """
          \end{minted}
      \end{itemize}
    \end{column}
    \hfill
    \begin{column}{0.2\textwidth}
    \end{column}
  \end{columns}
\end{frame}
